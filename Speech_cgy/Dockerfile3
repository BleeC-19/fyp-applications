FROM ubuntu:18.04
RUN apt-get update
RUN apt-get install python3 python3-pip -y

RUN pip3 install numpy textacy pathlib cytoolz numpy keras thinc

RUN pip3 install spacy
RUN python3 -m spacy download en_core_web_sm
RUN pip3 install grpcio 
RUN pip3 install protobuf sentimentanalyzer

ADD Speech_cgy/c3-Context/app /container/
ADD Speech_cgy/c3-Context/Data /container/data

ADD grpc/app/container_entry.sh /container/
ADD grpc/app/server.py /container/
ADD grpc/app/model_pb2_grpc.py /container/
ADD grpc/app/model_pb2.py /container/
ADD grpc/app/proxy_pb2_grpc.py /container/
ADD grpc/app/proxy_pb2.py /container/

CMD ["/container/container_entry.sh", "c3", "/container/server.py"]
# CMD ["python3","/container/predict.py"]

EXPOSE 11000